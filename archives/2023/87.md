---
title: yarn 使用以及 npm 的迁移
number: '#87'
link: 'https://github.com/tofrankie/blog/issues/87'
created_at: '2023-02-25 20:18:36'
updated_at: '2026-01-02 04:52:08'
labels:
  - Node.js
  - '2020'
---
![配图源自 Freepik](https://cdn.jsdelivr.net/gh/tofrankie/blog@main/images/2026/1/1767300184205.jpg)

> 本文以 yarn classic 为例

## yarn

```shell
# 初始化
$ yarn init

# 添加包
$ yarn add <package>

# 依赖项类别，分别对应 devDependencies、peerDependencies、optionalDependencies
$ yarn add <package> --dev
$ yarn add <package> --peer
$ yarn add <package> --optional

# 升级包
$ yarn upgrade <package>

# 移除包
$ yarn remove <package>

# 安装依赖，install 可省略
$ yarn install

# 更新 yarn 本体
$ yarn set version latest
$ yarn set version from source

# 查看全局包
$ yarn global list --depth=0

# 缓存相关
$ yarn cache list          # 查看缓存列表
$ yarn cache clean         # 清除缓存
```

## npm vs yarn

| npm (v5) | yarn | 
| --- | --- |
| npm install | yarn add | 
| (N/A) | yarn add --flat |
| (N/A) | yarn add --har |
| (N/A) | yarn add --har |
| npm install --no-package-lock | yarn add --no-lockfile |
| (N/A) | yarn add --pure-lockfile |
| npm install \<package> --save | yarn add \<package> |
| npm install \<package> --save-dev | yarn add \<package> --dev |
| (N/A) | yarn add --peer |
| npm install \<package> --save-optional | yarn add --optional |
| npm install \<package> --save-exact | yarn add --exact |
| npm install \<package> --global | yarn global add \<package> |
| npm update --global | yarn global upgrade |
| npm rebuild | yarn add --force |
| npm uninstall \<package> | yarn remove \<package> |
| npm cache clean | yarn cache clean \<package> |
| rm -rf node_modules && npm install | yarn upgrade |
| npm version major | yarn version --mojor |
| npm version minor | yarn version --minor |
| npm version patch | yarn version --patch |

## 参考链接

- [yarn classic 文档](https://classic.yarnpkg.com/en/docs)
- [yarn 2.x 文档](https://yarnpkg.com/)
