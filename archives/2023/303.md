---
title: 扫普通链接二维码打开小程序调研
number: '#303'
link: 'https://github.com/tofrankie/blog/issues/303'
created_at: '2023-03-10 10:22:16'
updated_at: '2026-01-13 15:21:59'
labels:
  - 小程序
  - '2021'
---
![配图源自 Freepik](https://cdn.jsdelivr.net/gh/tofrankie/blog@main/images/2026/1/1768288900171.jpg)

## 背景

近期有一个需求：扫普通链接二维码打开微信小程序。

唤起微信小程序方式：

1. 扫小程序码
2. 扫小程序二维码，可满足不同需求和场景。例如业务中需要记录渠道参数等，详见《[获取小程序二维码](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/qr-code.html#%E8%8E%B7%E5%8F%96%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%BA%8C%E7%BB%B4%E7%A0%81%EF%BC%88%E4%B8%8D%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8%EF%BC%89)》
3. 浏览器网页唤起小程序：
    1. 微信浏览器：**只能**通过 wx-open-launch-weapp 标签唤起，适用于公众号网页等打开小程序的场景。可参考《[关于 React 中使用 wx-open-launch-weapp 唤起微信小程序](https://github.com/tofrankie/blog/issues/153)》
    2. 非微信浏览器（如 Safari 等）：可通过 URL Scheme 方式打开小程序，适用于短信推送等场景。详见《[获取 URL Scheme](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/url-scheme.html)》
    3. 竞品 App 内置浏览器（如支付宝内置浏览器等），无法唤起。原因你懂的 🙄

4. 扫普通链接二维码打开小程序。这种方式配置简单、灵活，且无需自行开发 H5 页面。缺点是只能用使用微信扫一扫或微信内长按识别二维码跳转小程序，其他 App 扫描无法打开小程序。

在浏览器网页唤起小程序均需要自行实现 H5，普通链接二维码则不需要，而且配置简单灵活。**但缺点是只能用使用微信扫一扫或微信内长按识别二维码跳转小程序，其他 App 扫描无法打开小程序。**

## 开启能力

登录小程序后台，在「**设置 — 开发设置 — 扫普通链接二维码打开小程序**」处开启功能，开启后便可配置二维码规则。

⚠️ 注意：

1. 对于普通链接二维码，目前支持使用**微信扫一扫**或**微信内长按识别二维码**打开小程序。
2. 该功能暂不支持**个人类型小程序**。

## 踩坑/注意点

> 主要介绍一些踩坑/注意点，更多请看[官方文档](https://developers.weixin.qq.com/miniprogram/introduction/qrcode.html)

> 注：规则可能随时发生改变，以官方为准

### 二维码跳转规则

如需支持子路径匹配，请确认后台配置的二维码规则以 `/` 结尾。

| 后台已配置的二维码规则 | 线下二维码完整链接 | 错误原因 |
| :---: | :---: | --- |
| `https://www.qq.com/a/b` | `https://www.qq.com/a/b/123` | 规则没有以 `/` 结尾，不支持子路径匹配 |

### 链接带参

假设通过 `https://www.qq.com/test` 链接打开小程序的 `pages/index/index` 页面，配置如下：

![](https://cdn.jsdelivr.net/gh/tofrankie/blog@main/images/2026/1/1767208393487.png)

▲ 图中二维码规则的域名是乱写的，自行修改并校验便可。

配置完成后，便可以拿到一个符合规则的链接：`https://www.qq.com/test?channel=123`，满足携带参数的需求。

> 如不确定自己编写的链接是否满足规则，可在配置项的**测试链接**中填写，若不符合规则，会有提示以及无法保存成功。

### 获取参数

二维码的链接内容会以参数 `q` 的形式带给页面。可在 `App.onLaunch`、`App.onShow`、`Page.onLoad` 中获取。还需要自行 `decodeURIComponent` 一下，才是原二维码的完整内容。

```js
// app.js
App({
  onLaunch(options) {
    console.log(options)
    // {
    //   mode: 'default',
    //   path: 'pages/index/index',
    //   query: {
    //     q: 'https%3A%2F%2Fwww.qq.com%2Ftest%3Fchannel%3D123',
    //     scancode_time: '1615973269',
    //   },
    //   referrerInfo: {
    //     scene: 1011
    //   }
    // }
  }
})


// index.js
Page({
 onLoad(options) {
    console.log(options)
    // {
    //   q: 'https%3A%2F%2Fwww.qq.com%2Ftest%3Fchannel%3D123',
    //   scancode_time: '1615973269'
    // }
  }
})
```

### 发布二维码跳转规则

小程序必须先发布代码才可以发布二维码跳转规则。一个小程序帐号一个月可发布不多于 20 次二维码跳转规则。

### 如何在不提审的情况下进行测试？

如果小程序已经上线，且相关规则发布之后，扫码该链接会打开线上版本的小程序。

如果想要打开开发版小程序，测试范围选择开发部，同时在**测试链接**中配置链接，保存后重新扫码便可。

![](https://cdn.jsdelivr.net/gh/tofrankie/blog@main/images/2026/1/1767208409075.png)

### 规则生效时间

二维码配置规则必须发布后等待 5 分钟以后才可以使用（这个坑没踩，在写这篇文章的时候仍处于调研阶段）

## 参考链接

- [扫普通链接二维码打开小程序](https://developers.weixin.qq.com/miniprogram/introduction/qrcode.html)
