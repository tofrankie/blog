---
title: pnpm/yarn/npm 常用命令
number: '#88'
link: 'https://github.com/tofrankie/blog/issues/88'
created_at: '2023-02-25 20:19:23'
updated_at: '2026-01-21 18:35:37'
labels:
  - Node.js
  - '2019'
---
![配图源自 Freepik](https://cdn.jsdelivr.net/gh/tofrankie/blog@main/images/2026/1/1768382216883.jpg)

作个记录。

## pnpm

> [官网](https://pnpm.io/)

### 1. 安装 workspace 下的子包

```bash
$ pnpm add <package>@workspace:*
```

> 其中 `workspace:*` 表示该包的最新版本（推荐），也可以用 `workspace:^`、`workspace:~` 方式

> 除此之外，也可以在项目的 `.npmrc` 中指定 `link-workspace-packages=true`，这样就可以直接用 `pnpm add <package>` 形式，它会优先使用工作区内的包（若有）

### 2. 给子包安装依赖

在子包路径下，像平常那样用便可：

```bash
$ pnpm add <package>
```

在项目根目录，可以添加 `--filter` 参数以匹配子包：

```shell
$ pnpm add <package> --filter <subpackage-name>
```

> `--filter` 还支持模糊匹配，[了解更多](https://pnpm.io/filtering)

### 3. 依赖排查

显示依赖于指定包的所有包（即指定包被谁所依赖）：

```bash
$ pnpm why <package>
```

清空无用依赖缓存

```bash
$ pnpm store prune 
```

> 由于 `pnpm remove` 不会主动清空全局缓存的依赖，随着时间积累、依赖升级等情况，难免会积累一些或许不会再用到的过时依赖，它会占据你的磁盘空间。你可以放心地使用 `pnpm store prune` 来清空那些没有被使用到的依赖。它是无害的，要是后续要用到此依赖，`pnpm install` 会重新下载缓存。[了解更多](https://pnpm.io/cli/store#prune)

## yarn classic

> [官网](https://classic.yarnpkg.com/en/docs)

待补充...

### 1. 列举全局包

```bash
$ yarn global list
```

## npm

> [官网](https://docs.npmjs.com/cli/v11/commands/npm)

### 1. 升级包

```bash
$ npm update <package>
```

### 2. 检查包更新

```bash
$ npm outdated   # 检查当前项目的包
```

### 3. 查看包版本

```bash
$ npm view <package> versions   # 查看全部版本
$ npm view <package> version    # 查看最新版本
```

### 4. 更新指定版本

```bash
$ npm install <package>@<version>
```

### 5. 卸载包

```bash
$ npm uninstall <package>               # 删除包，但不删除包在 package.json 中的依赖关系
$ npm uninstall <package> --save        # 删除包，同时删除包在 package.json 中 dependencies 下的依赖关系
$ npm uninstall <package> --save-dev    # 删除包，同时删除包在 package.json 中 devDependencies 下的依赖关系
```

### 6. 列举全局包

```bash
$ npm list -g
```

### 7. 其他

```bash
$ npm info <package>                      # 查看包信息
$ npm view <package> engines              # 查看当前包依赖的 Node 最低版本
$ npm search <package>                    # 搜索包
$ npm root                                # 查看当前包的安装路径
$ npm root -g                             # 查看全局包的安装路径
$ npm repo <package>                      # 打开包的仓库地址
$ npm docs <package>                      # 打开包的文档
$ npm config get registry                 # 获取当前镜像源
$ npm config set registry <registry-url>  # 获取当前镜像源
```
