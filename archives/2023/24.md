---
title: '解决 Sourcetree 报错 Couldn''t posix_spawn: error 2 问题'
number: '#24'
link: 'https://github.com/tofrankie/blog/issues/24'
created_at: '2023-02-25 18:56:31'
updated_at: '2026-01-01 15:27:10'
labels:
  - Mac
  - '2022'
---
![配图源自 Freepik](https://cdn.jsdelivr.net/gh/tofrankie/blog@main/images/2026/1/1767251391357.jpg)

前几天更新到 macOS 12.3 之后，Sourcetree 无法正常打开 Mercurial 的项目，猜测是跟 macOS 12.3 移除了内置的 Python2 有关。报错如下：

![](https://cdn.jsdelivr.net/gh/tofrankie/blog@main/images/2026/1/1767251427386.png)

在 ATLASSIAN Community 上也能找到相关的帖子，比如这篇：[Couldn't posix_spawn: error 2](https://web.archive.org/web/20240804220113/https://community.atlassian.com/t5/Sourcetree-questions/Couldn-t-posix-spawn-error-2/qaq-p/1974979)，我也在上面留言了。

![](https://cdn.jsdelivr.net/gh/tofrankie/blog@main/images/2026/1/1767251442588.png)

其实，打开 Sourcetree 偏好设置可以看到报错原因了：

![](https://cdn.jsdelivr.net/gh/tofrankie/blog@main/images/2026/1/1767251459350.png)

其中有两个选项，前者意思是「使用内置的 Mercurial」，后者表示「使用系统安装的 Mercurial」。猜测是 Sourcetree 内置的 Mercurial 依赖了 macOS 系统内置的 Python2，但由于系统更新之后已彻底移除，所以就报错了（当前 Sourcetree 最新版本为 4.1.6，仍存在问题，目测后续版本会解决此问题）。

因此，解决思路也很简单，就是使用自行安装的 Mercurial 即可。

> 从 **Use System Mercurial** 处选择路径：`/usr/local/Cellar/mercurial/6.1/lib/python3.10/site-packages/mercurial`（根据自己安装的 Mercurial 版本及对应路径去选择）。

如果你是通过 Homebrew 安装 Mercurial 的话，可以使用 `brew list mercurial` 命令查看其路径。

![](https://cdn.jsdelivr.net/gh/tofrankie/blog@main/images/2026/1/1767251476122.png)

重新打开，就可以了，不再报错。

![](https://cdn.jsdelivr.net/gh/tofrankie/blog@main/images/2026/1/1767251488899.png)

## 2025.03.19 更新

打开仓库错误提示，也可以使用上述方法解决。

```
'hg status' failed with code 255:'abort: repository requires features unknown to this Mercurial: revlog-compression-zstd (see https://mercurial-scm.org/wiki/MissingRequirement for more information) '
```

## 参考链接

- [OSX 12.6 - Mercurial repo 'hg status' failed with code 255](https://jira.atlassian.com/browse/SRCTREE-7964)
